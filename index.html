<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sample Banking App</title>
  <style>
    /* Basic resets */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
    }
    /* Container styling */
    .container {
      width: 90%;
      max-width: 600px;
      margin: 50px auto;
      background: white;
      padding: 20px;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    /* Form styling */
    h2, h3 {
      text-align: center;
      margin-bottom: 20px;
    }
    form {
      display: flex;
      flex-direction: column;
    }
    form input {
      margin-bottom: 15px;
      padding: 10px;
      font-size: 16px;
    }
    form button {
      padding: 10px;
      font-size: 16px;
      background: #333;
      color: #fff;
      border: none;
      cursor: pointer;
    }
    .link {
      text-align: center;
      margin-top: 10px;
      color: blue;
      cursor: pointer;
      text-decoration: underline;
    }
    /* Dashboard styling */
    #dashboard {
      display: none;
    }
    #nav {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;
      background: #333;
      padding: 10px;
      border-radius: 5px;
      margin-bottom: 20px;
    }
    #nav button {
      background: #fff;
      color: #333;
      border: none;
      padding: 10px 15px;
      cursor: pointer;
      border-radius: 3px;
      font-size: 14px;
      margin: 5px;
    }
    .section {
      display: none;
    }
    .section.active {
      display: block;
    }
    .balance-display {
      font-size: 20px;
      margin-bottom: 15px;
    }
    .form-group {
      margin-bottom: 15px;
    }
    .form-group label {
      margin-bottom: 5px;
      display: block;
    }
    .form-group input {
      width: 100%;
      padding: 8px;
      font-size: 14px;
    }
    .form-group button {
      padding: 10px;
      font-size: 16px;
      background: #333;
      color: #fff;
      border: none;
      cursor: pointer;
      border-radius: 3px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    table, th, td {
      border: 1px solid #ccc;
    }
    th, td {
      padding: 10px;
      text-align: left;
    }
    /* Popup Modal Styling */
    #popup-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    #popup-box {
      background: #fff;
      padding: 20px;
      border-radius: 5px;
      width: 300px;
      text-align: center;
    }
    #popup-box p {
      margin-bottom: 20px;
    }
    #popup-buttons button {
      padding: 10px 20px;
      border: none;
      background: #333;
      color: #fff;
      cursor: pointer;
      border-radius: 3px;
      margin: 0 5px;
    }
  </style>
</head>
<body>
<!-- Login Container -->
<div id="login-container" class="container">
  <h2>Banking App Login</h2>
  <form id="login-form">
    <input type="text" id="login-username" placeholder="Username" required />
    <input type="password" id="login-password" placeholder="Password" required />
    <button type="submit">Login</button>
  </form>
  <p class="link" onclick="toggleContainers('signup')">Don't have an account? Sign Up</p>
</div>

<!-- Signup Container -->
<div id="signup-container" class="container" style="display:none;">
  <h2>Sign Up</h2>
  <form id="signup-form">
    <input type="text" id="signup-name" placeholder="Full Name" required />
    <input type="text" id="signup-username" placeholder="Username" required />
    <input type="password" id="signup-password" placeholder="Password" required />
    <button type="submit">Sign Up</button>
  </form>
  <p class="link" onclick="toggleContainers('login')">Already have an account? Login</p>
</div>

<!-- Dashboard -->
<div id="dashboard" class="container">
  <div id="nav">
    <button onclick="showSection('home')">Home</button>
    <button onclick="showSection('deposit')">Deposit</button>
    <button onclick="showSection('withdraw')">Withdraw</button>
    <button onclick="showSection('transfer')">Transfer</button>
    <button onclick="showSection('loan')">Loan</button>
    <button onclick="showSection('bill')">Bill Payment</button>
    <button onclick="showSection('transactions')">Transactions</button>
    <button onclick="showSection('settings')">Settings</button>
    <button onclick="logout()">Logout</button>
  </div>

  <!-- Sections -->
  <div id="home" class="section active">
    <h3>Welcome, <span id="user-display"></span>!</h3>
    <p class="balance-display">Account Balance: $<span id="balance-display">0.00</span></p>
    <p>Use the navigation above to perform transactions.</p>
  </div>

  <div id="deposit" class="section">
    <h3>Deposit Money</h3>
    <div class="form-group">
      <label for="deposit-amount">Amount:</label>
      <input type="number" id="deposit-amount" placeholder="Enter amount to deposit" />
    </div>
    <div class="form-group">
      <button onclick="depositMoney()">Deposit</button>
    </div>
  </div>

  <div id="withdraw" class="section">
    <h3>Withdraw Money</h3>
    <div class="form-group">
      <label for="withdraw-amount">Amount:</label>
      <input type="number" id="withdraw-amount" placeholder="Enter amount to withdraw" />
    </div>
    <div class="form-group">
      <button onclick="withdrawMoney()">Withdraw</button>
    </div>
  </div>

  <div id="transfer" class="section">
    <h3>Transfer Money</h3>
    <div class="form-group">
      <label for="transfer-recipient">Recipient Account:</label>
      <input type="text" id="transfer-recipient" placeholder="Enter recipient account number" />
    </div>
    <div class="form-group">
      <label for="transfer-amount">Amount:</label>
      <input type="number" id="transfer-amount" placeholder="Enter amount to transfer" />
    </div>
    <div class="form-group">
      <button onclick="transferMoney()">Transfer</button>
    </div>
  </div>

  <div id="loan" class="section">
    <h3>Loan Request</h3>
    <div class="form-group">
      <label for="loan-amount">Loan Amount:</label>
      <input type="number" id="loan-amount" placeholder="Enter loan amount" />
    </div>
    <div class="form-group">
      <button onclick="requestLoan()">Request Loan</button>
    </div>
  </div>

  <div id="bill" class="section">
    <h3>Bill Payment</h3>
    <div class="form-group">
      <label for="bill-payee">Bill Payee:</label>
      <input type="text" id="bill-payee" placeholder="Enter bill payee (e.g. Electricity, Internet)" />
    </div>
    <div class="form-group">
      <label for="bill-amount">Amount:</label>
      <input type="number" id="bill-amount" placeholder="Enter bill amount" />
    </div>
    <div class="form-group">
      <button onclick="payBill()">Pay Bill</button>
    </div>
  </div>

  <div id="transactions" class="section">
    <h3>Transaction History</h3>
    <table id="transaction-table">
      <thead>
      <tr>
        <th>Date</th>
        <th>Type</th>
        <th>Description</th>
        <th>Amount</th>
      </tr>
      </thead>
      <tbody>
      <!-- Transactions will be added here dynamically -->
      </tbody>
    </table>
  </div>

  <div id="settings" class="section">
    <h3>Account Settings</h3>
    <p>Feature coming soon!</p>
  </div>
</div>

<!-- Popup Modal for Alerts and Confirmations -->
<div id="popup-overlay">
  <div id="popup-box">
    <p id="popup-message"></p>
    <div id="popup-buttons">
      <!-- Buttons will be injected dynamically -->
    </div>
  </div>
</div>

<script>
  // Custom Popup Functions
  function showAlert(message) {
    document.getElementById("popup-message").innerText = message;
    const buttonsDiv = document.getElementById("popup-buttons");
    buttonsDiv.innerHTML = "";
    const okBtn = document.createElement("button");
    okBtn.innerText = "OK";
    okBtn.onclick = closePopup;
    buttonsDiv.appendChild(okBtn);
    document.getElementById("popup-overlay").style.display = "flex";
  }

  let confirmCallback = null;
  function showConfirm(message, callback) {
    confirmCallback = callback;
    document.getElementById("popup-message").innerText = message;
    const buttonsDiv = document.getElementById("popup-buttons");
    buttonsDiv.innerHTML = "";
    const yesBtn = document.createElement("button");
    yesBtn.innerText = "Yes";
    yesBtn.onclick = function () {
      closePopup();
      if (confirmCallback) {
        confirmCallback(true);
      }
      confirmCallback = null;
    };
    const noBtn = document.createElement("button");
    noBtn.innerText = "No";
    noBtn.onclick = function () {
      closePopup();
      if (confirmCallback) {
        confirmCallback(false);
      }
      confirmCallback = null;
    };
    buttonsDiv.appendChild(yesBtn);
    buttonsDiv.appendChild(noBtn);
    document.getElementById("popup-overlay").style.display = "flex";
  }

  function closePopup() {
    document.getElementById("popup-overlay").style.display = "none";
  }

  // Global variables to simulate a user's account and user database
  let currentUser = null;
  let accountBalance = 0;
  let transactions = [];
  // In-memory user database with a dummy user pre-loaded.
  const users = [{ username: "user", password: "password", name: "John Doe" }];

  // Utility function to add a transaction entry
  function addTransaction(type, amount, description) {
    const transaction = {
      date: new Date().toLocaleString(),
      type: type,
      description: description,
      amount: amount.toFixed(2)
    };
    transactions.push(transaction);
    updateTransactionTable();
  }

  // Update transaction history table
  function updateTransactionTable() {
    const tbody = document.querySelector("#transaction-table tbody");
    tbody.innerHTML = "";
    transactions.forEach(tx => {
      const row = document.createElement("tr");
      row.innerHTML = `<td>${tx.date}</td>
                         <td>${tx.type}</td>
                         <td>${tx.description}</td>
                         <td>$${tx.amount}</td>`;
      tbody.appendChild(row);
    });
  }

  // Update balance display
  function updateBalanceDisplay() {
    document.getElementById("balance-display").innerText = accountBalance.toFixed(2);
  }

  // Show the specified section in the dashboard
  function showSection(sectionId) {
    document.querySelectorAll(".section").forEach(sec => sec.classList.remove("active"));
    document.getElementById(sectionId).classList.add("active");
    if (sectionId === "home") {
      updateBalanceDisplay();
    }
  }

  // Toggle between login and signup containers
  function toggleContainers(view) {
    if (view === "signup") {
      document.getElementById("login-container").style.display = "none";
      document.getElementById("signup-container").style.display = "block";
    } else {
      document.getElementById("signup-container").style.display = "none";
      document.getElementById("login-container").style.display = "block";
    }
  }

  // Handle signup form submission
  document.getElementById("signup-form").addEventListener("submit", function (e) {
    e.preventDefault();
    const name = document.getElementById("signup-name").value.trim();
    const username = document.getElementById("signup-username").value.trim();
    const password = document.getElementById("signup-password").value.trim();
    if (!name || !username || !password) {
      showAlert("Please fill in all fields.");
      return;
    }
    // Check if username already exists
    const userExists = users.some(user => user.username === username);
    if (userExists) {
      showAlert("Username already exists. Please choose a different one.");
      return;
    }
    // Add new user to the users array
    users.push({ name, username, password });
    showAlert("Registration successful! Please login with your new credentials.");
    // Clear signup fields and switch back to login
    document.getElementById("signup-form").reset();
    toggleContainers("login");
  });

  // Handle login form submission
  document.getElementById("login-form").addEventListener("submit", function (e) {
    e.preventDefault();
    const username = document.getElementById("login-username").value.trim();
    const password = document.getElementById("login-password").value.trim();
    // Find matching user
    const user = users.find(user => user.username === username && user.password === password);
    if (user) {
      currentUser = user;
      document.getElementById("user-display").innerText = currentUser.name;
      document.getElementById("login-container").style.display = "none";
      document.getElementById("signup-container").style.display = "none";
      document.getElementById("dashboard").style.display = "block";
      updateBalanceDisplay();
    } else {
      showAlert("Invalid credentials. Please try again.");
    }
  });

  // Deposit money
  function depositMoney() {
    const amountInput = document.getElementById("deposit-amount");
    const amount = parseFloat(amountInput.value);
    if (isNaN(amount) || amount <= 0) {
      showAlert("Please enter a valid amount.");
      return;
    }
    accountBalance += amount;
    addTransaction("Deposit", amount, "Deposit to account");
    updateBalanceDisplay();
    showAlert(`Deposited $${amount.toFixed(2)} successfully.`);
    amountInput.value = "";
    showSection("home");
  }

  // Withdraw money
  function withdrawMoney() {
    const amountInput = document.getElementById("withdraw-amount");
    const amount = parseFloat(amountInput.value);
    if (isNaN(amount) || amount <= 0) {
      showAlert("Please enter a valid amount.");
      return;
    }
    if (amount > accountBalance) {
      showAlert("Insufficient funds.");
      return;
    }
    accountBalance -= amount;
    addTransaction("Withdrawal", amount, "Withdrawal from account");
    updateBalanceDisplay();
    showAlert(`Withdrew $${amount.toFixed(2)} successfully.`);
    amountInput.value = "";
    showSection("home");
  }

  // Transfer money
  function transferMoney() {
    const recipient = document.getElementById("transfer-recipient").value.trim();
    const amountInput = document.getElementById("transfer-amount");
    const amount = parseFloat(amountInput.value);
    if (recipient === "" || isNaN(amount) || amount <= 0) {
      showAlert("Please enter a valid recipient and amount.");
      return;
    }
    if (amount > accountBalance) {
      showAlert("Insufficient funds.");
      return;
    }
    accountBalance -= amount;
    addTransaction("Transfer", amount, `Transfer to ${recipient}`);
    updateBalanceDisplay();
    showAlert(`Transferred $${amount.toFixed(2)} to ${recipient} successfully.`);
    document.getElementById("transfer-recipient").value = "";
    amountInput.value = "";
    showSection("home");
  }

  // Request loan (simulate by adding the amount to the account)
  function requestLoan() {
    const amountInput = document.getElementById("loan-amount");
    const amount = parseFloat(amountInput.value);
    if (isNaN(amount) || amount <= 0) {
      showAlert("Please enter a valid loan amount.");
      return;
    }
    accountBalance += amount;
    addTransaction("Loan", amount, "Loan credited to account");
    updateBalanceDisplay();
    showAlert(`Loan of $${amount.toFixed(2)} approved and credited to your account.`);
    amountInput.value = "";
    showSection("home");
  }

  // Pay bill (simulate bill payment as a withdrawal)
  function payBill() {
    const payee = document.getElementById("bill-payee").value.trim();
    const amountInput = document.getElementById("bill-amount");
    const amount = parseFloat(amountInput.value);
    if (payee === "" || isNaN(amount) || amount <= 0) {
      showAlert("Please enter a valid bill payee and amount.");
      return;
    }
    if (amount > accountBalance) {
      showAlert("Insufficient funds.");
      return;
    }
    accountBalance -= amount;
    addTransaction("Bill Payment", amount, `Bill payment to ${payee}`);
    updateBalanceDisplay();
    showAlert(`Bill of $${amount.toFixed(2)} paid to ${payee} successfully.`);
    document.getElementById("bill-payee").value = "";
    amountInput.value = "";
    showSection("home");
  }

  // Logout function (uses custom confirm popup)
  function logout() {
    showConfirm("Are you sure you want to logout?", function (confirmed) {
      if (confirmed) {
        currentUser = null;
        accountBalance = 0;
        transactions = [];
        document.getElementById("dashboard").style.display = "none";
        document.getElementById("login-container").style.display = "block";
        document.getElementById("login-form").reset();
      }
    });
  }
</script>
</body>
</html>
